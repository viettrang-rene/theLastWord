<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzle Fun Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #fff;
      color: #000;
    }
    h1, h2 {
      text-align: center;
    }
    .theme-green { --accent: green; }
    .theme-brown { --accent: brown; }
    .theme-blue { --accent: blue; }
    :root {
      --accent: #000;
    }
    .accent {
      color: var(--accent);
    }
    textarea {
      width: 100%;
      height: 100px;
    }
    .button-group button {
      margin: 5px;
      padding: 8px 16px;
    }
    .preview, .pdf-output {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1 class="accent">Puzzle Fun!</h1>
  <h2 class="accent">Made by Rene</h2>
  <p><strong>Student name:</strong> ________________</p>

  <div class="input-section">
    <textarea id="wordInput" placeholder="Enter words (e.g., apple, banana, dolphin) or choose a theme below."></textarea>
    <div class="button-group">
      <button onclick="loadTheme('easy')" style="background: green; color: white">Easy Animals</button>
      <button onclick="loadTheme('farm')" style="background: brown; color: white">Farm Animals</button>
      <button onclick="loadTheme('ocean')" style="background: blue; color: white">Ocean Animals</button>
      <button onclick="resetInput()">Reset</button>
      <button onclick="generatePDF()">Generate PDF</button>
    </div>
  </div>

  <div class="preview" id="previewArea"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const themes = {
      easy: { words: ["cat", "dog", "bat", "fox", "owl", "rat", "bee", "ant"], color: 'green', class: 'theme-green' },
      farm: { words: ["cow", "pig", "goat", "sheep", "horse", "duck", "hen", "dog"], color: 'brown', class: 'theme-brown' },
      ocean: { words: ["shark", "whale", "fish", "crab", "octopus", "seal", "eel", "dolphin"], color: 'blue', class: 'theme-blue' }
    };

    function loadTheme(theme) {
      const { words, class: themeClass } = themes[theme];
      document.getElementById("wordInput").value = words.join(", ");
      document.body.className = themeClass;
    }

    function resetInput() {
      document.getElementById("wordInput").value = "";
      document.body.className = "";
    }

    function generatePDF() {
      const raw = document.getElementById("wordInput").value;
      let words = raw.split(/[\n,]+/).map(w => w.trim().toLowerCase()).filter(w => /^[a-zA-Z]+$/.test(w));

      if (words.length === 0) {
        alert("Only letters allowed. Please try again!");
        return;
      }

      // Sample scrambled clues
      const scrambled = words.map(w => shuffle(w));

      // Create PDF
      const {{ jsPDF }} = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(16);
      doc.text("Puzzle Fun!", 105, 20, null, null, 'center');
      doc.setFontSize(12);
      doc.text("Made by Rene", 105, 28, null, null, 'center');
      doc.text("Student name: ________________", 20, 38);

      // Crossword Clues
      doc.setFontSize(14);
      doc.text("Crossword Clues (scrambled):", 20, 48);
      scrambled.forEach((s, i) => {
        doc.text(`${i + 1}. ${s} (${words[i].length} letters)`, 25, 58 + i * 8);
      });

      // Word Search Placeholder
      doc.setFontSize(14);
      doc.text("Word Search: (Not implemented)", 20, 130);

      // Word Bank
      doc.setFontSize(12);
      doc.text("Word Bank:", 20, 140);
      words.forEach((w, i) => {
        doc.text(w, 25, 148 + i * 6);
      });

      doc.save("puzzle_fun.pdf");
    }

    function shuffle(word) {
      const arr = word.split("");
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.join("");
    }
  </script>
</body>
</html>
